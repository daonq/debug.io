<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content='width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, user-scalable=no, shrink-to-fit=yes'>
    <title>Unity WebGL Player | pokemon_ar</title>
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
        html {
            height: -webkit-fill-available;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            min-height: -webkit-fill-available;
            width: 100vw;
            overflow: hidden;
        }

        .ctaDiv {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            background: #fffa;
            z-index: 99;
        }
    </style>
</head>

<body>
    <!--IMAGETARGETS-->
    <imagetarget id='ChuotSamSet-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290165560590376/ChuotSamSet-LV1.jpg?ex=65146ea2&is=65131d22&hm=7712d408d8a22f374e34c98eb4cbec9dba4449afb2030be711417352c19b20c0&'>
    </imagetarget>
    <imagetarget id='ChuotSamSet-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290165858369586/ChuotSamSet-LV2.jpg?ex=65146ea2&is=65131d22&hm=481928ebf707c3a8fb9ec3293c0bc0ad7b5bf64a188ec39b5ab74e82f2f34995&'>
    </imagetarget>
    <imagetarget id='ChuotSamSet-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290166126813246/ChuotSamSet-LV3.jpg?ex=65146ea2&is=65131d22&hm=af2ce935d0415b3b3955bf7d510efdd8b83399d1cfeb6d90e366562997739182&'>
    </imagetarget>
    <imagetarget id='CuaQuaiDi-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290166403645530/CuaQuaiDi-LV1.jpg?ex=65146ea2&is=65131d22&hm=01bc56a1ddf6f671fab193647a267ca5a14b628e75ca86505e49a4e5ff4ef88c&'>
    </imagetarget>
    <imagetarget id='CuaQuaiDi-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290166667870389/CuaQuaiDi-LV2.jpg?ex=65146ea2&is=65131d22&hm=989fe4b0e1f3536db5f24eb1e7474aa84c854bebe3d7aa0784fc0a76d5d17f65&'>
    </imagetarget>
    <imagetarget id='CuaQuaiDi-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290167011811338/CuaQuaiDi-LV3.jpg?ex=65146ea2&is=65131d22&hm=26ccdb539d3a46cafa5f0799056a836350859b3683a37db7f49f430b5351556a&'>
    </imagetarget>
    <imagetarget id='CuuViHo-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290167347363923/CuuViHo-LV1.jpg?ex=65146ea2&is=65131d22&hm=f9cc5f06ff49709792bcf6fff8458a0365ce3bca6b78b09647867634e431455d&'>
    </imagetarget>
    <imagetarget id='CuuViHo-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290167661920337/CuuViHo-LV2.jpg?ex=65146ea2&is=65131d22&hm=87e96ea6c9ac85dcd262314e025c94a32c313d880856dcb6058b5285dea9cb72&'>
    </imagetarget>
    <imagetarget id='CuuViHo-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290167972307064/CuuViHo-LV3.jpg?ex=65146ea2&is=65131d22&hm=fd243448b03f0843ebaf3df1c0367d70289d35b2384f0004335a2c8c86b1b2e3&'>
    </imagetarget>
    <imagetarget id='DuocDaiNhan-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290216919826593/DuocDaiNhan-LV1.jpg?ex=65146eae&is=65131d2e&hm=2b64d14c90ebe5cfabe60302881b11cf701d23770e8cb00f7c5d163cff1e5a28&'>
    </imagetarget>
    <imagetarget id='DuocDaiNhan-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290217301520498/DuocDaiNhan-LV2.jpg?ex=65146eae&is=65131d2e&hm=46c20e1f90afa16d22ab9113c5c81af8c19fa2efe6628dfebd015dfaf4b5acbf&'>
    </imagetarget>
    <imagetarget id='DuocDaiNhan-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290217624486062/DuocDaiNhan-LV3.jpg?ex=65146eae&is=65131d2e&hm=2fe608260dac9d92cbb1d1699863f09e79efc79bce76d8cd528cebd8302fc6a3&'>
    </imagetarget>
    <imagetarget id='GauLucSiBacCuc-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290218001956864/GauLucSiBacCuc-LV1.jpg?ex=65146eae&is=65131d2e&hm=d13fc3fd35a5e177d9fb3b2dee4eff0db311d2cbcf3db380cb9adc5180451cb9&'>
    </imagetarget>
    <imagetarget id='GauLucSiBacCuc-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290218442375208/GauLucSiBacCuc-LV2.jpg?ex=65146eae&is=65131d2e&hm=9ae4372394c337040aec8ccb42094df96896468e1dfa9e5eab512def723a3943&'>
    </imagetarget>
    <imagetarget id='GauLucSiBacCuc-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290218870190261/GauLucSiBacCuc-LV3.jpg?ex=65146eaf&is=65131d2f&hm=977fb33776691523d2dcbdc2e7cd1482cbe6b5e193952db42b69e13c34c12de4&'>
    </imagetarget>
    <imagetarget id='HaMaCaCao-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290219226710067/HaMaCaCao-LV1.jpg?ex=65146eaf&is=65131d2f&hm=e3ab0ed3a150fe7372a099eb411771b110785ca6bc6210a2e03e3266e52d8da9&'>
    </imagetarget>
    <imagetarget id='HaMaCaCao-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290219587403936/HaMaCaCao-LV2.jpg?ex=65146eaf&is=65131d2f&hm=7a95b56baa8b8bbb3d76cc75b8101c261318924974a246e2944553ba5c256303&'>
    </imagetarget>
    <imagetarget id='HaMaCaCao-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290219969101936/HaMaCaCao-LV3.jpg?ex=65146eaf&is=65131d2f&hm=305c8e30d541fae2cb8c9a4b02485665c11a8a3db75b165079da9fac33c54514&'>
    </imagetarget>
    <imagetarget id='HoaLanSu-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290231666999336/HoaLanSu-LV1.jpg?ex=65146eb2&is=65131d32&hm=4f089da63fbaf9ebfcdb906704894e6e8aeae43ee96242ca5357cbe033cd5c7c&'>
    </imagetarget>
    <imagetarget id='HoaLanSu-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290232031924285/HoaLanSu-LV2.jpg?ex=65146eb2&is=65131d32&hm=a16f3fa18a4b460efd602e37b02345e9072d2ef71be78698ffeb7b5b36fb2131&'>
    </imagetarget>
    <imagetarget id='HoaLanSu-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290232874975242/HoaLanSu-LV3.jpg?ex=65146eb2&is=65131d32&hm=80575a417effc301407d0a7165be941ef383f8ec8eb36a397dddef8db0844cb4&'>
    </imagetarget>
    <imagetarget id='HoangTuHoLo-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290233298583662/HoangTuHoLo-LV1.jpg?ex=65146eb2&is=65131d32&hm=52006a125d45f2d2ae8c6e5abab98792a5ac5b498da750206f25bf516fba03c3&'>
    </imagetarget>
    <imagetarget id='HoangTuHoLo-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290233655119942/HoangTuHoLo-LV2.jpg?ex=65146eb2&is=65131d32&hm=812797162ba2472e26758ab74640f13c4bdcc3f2ee96e295a7b98b87b472d1cf&'>
    </imagetarget>
    <imagetarget id='HoangTuHoLo-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290234003243018/HoangTuHoLo-LV3.jpg?ex=65146eb2&is=65131d32&hm=692049b74e02c8a486cc8915bd56e6e69af34d3112e21637a6054ed084660ae1&'>
    </imagetarget>
    <imagetarget id='HuouNuiLua-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290234401706125/HuouNuiLua-LV1.jpg?ex=65146eb2&is=65131d32&hm=866fc5b729379cf4226101e8845b75960acee23abf9470954c07b57f3f860f71&'>
    </imagetarget>
    <imagetarget id='HuouNuiLua-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290234804355162/HuouNuiLua-LV2.jpg?ex=65146eb2&is=65131d32&hm=ac0d74211af9c5566be3ffe0371a89b3d5a36233e6059101ff25cc635465b398&'>
    </imagetarget>
    <imagetarget id='HuouNuiLua-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290235282509965/HuouNuiLua-LV3.jpg?ex=65146eb2&is=65131d32&hm=6bd497331b94f4c3ea0c218d44b108c463df7c23dfb5896737c7b0ffaad6bcfb&'>
    </imagetarget>
    <imagetarget id='ManhHoaKien-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290265351454820/ManhHoaKien-LV1.jpg?ex=65146eba&is=65131d3a&hm=329756193c3ec070c693287d3d1efcc004fea28ca2da3de2237cdf01019559ac&'>
    </imagetarget>
    <imagetarget id='ManhHoaKien-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290265787670539/ManhHoaKien-LV2.jpg?ex=65146eba&is=65131d3a&hm=be804dd09f37371f74d68a7e8a02d02b92479b9beff8f61cb850db9cfdbe5051&'>
    </imagetarget>
    <imagetarget id='ManhHoaKien-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290266144194690/ManhHoaKien-LV3.jpg?ex=65146eba&is=65131d3a&hm=8851f8318d3c92052d2bb92c2f384c0ab06ebe91762bc4991b37b0a064fbe821&'>
    </imagetarget>
    <imagetarget id='MaoChinDuoi-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290266483916831/MaoChinDuoi-LV1.jpg?ex=65146eba&is=65131d3a&hm=20013cf0f85bb3d75c42537861f946312463c87fd8d4b576afbe2e8121f9af56&'>
    </imagetarget>
    <imagetarget id='MaoChinDuoi-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290266987249816/MaoChinDuoi-LV2.jpg?ex=65146eba&is=65131d3a&hm=683c3cdb466f286aa9ed232992708766b0cddb049abc86f9377594f646e29609&'>
    </imagetarget>
    <imagetarget id='MaoChinDuoi-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290267368915124/MaoChinDuoi-LV3.jpg?ex=65146eba&is=65131d3a&hm=204d9872287860a539d40cd617dd75d5b33283154b5490292a62fba839bd786e&'>
    </imagetarget>
    <imagetarget id='MuiMui-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290267708669973/MuiMui-LV1.jpg?ex=65146eba&is=65131d3a&hm=0eb0a8334181d2d17fc771e913d6116a5a65b08e2b8dd39f6a23f6a6b45a1092&'>
    </imagetarget>
    <imagetarget id='MuiMui-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290268040003594/MuiMui-LV2.jpg?ex=65146eba&is=65131d3a&hm=c584309668fbfc7b429d604d49a1897bf7d3330e14bad3d76ecdc14317913e3c&'>
    </imagetarget>
    <imagetarget id='MuiMui-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290268434276423/MuiMui-LV3.jpg?ex=65146eba&is=65131d3a&hm=90927baee799d000b9f8542aa776b556e395c5cc62582127fbfcd0c5a5b4da7a&'>
    </imagetarget>
    <imagetarget id='OngLaVa-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290285547044926/OngLaVa-LV1.jpg?ex=65146ebe&is=65131d3e&hm=cba2e97f72452464dafb033166262188d0cb56a5cb69ee93e3343279f5715989&'>
    </imagetarget>
    <imagetarget id='OngLaVa-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290285861613619/OngLaVa-LV2.jpg?ex=65146ebe&is=65131d3e&hm=4e14adceb9b5ce8b7ebd0d9f3d6df28216773612b9651c35bf56500ab9d2534a&'>
    </imagetarget>
    <imagetarget id='OngLaVa-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290286218117120/OngLaVa-LV3.jpg?ex=65146ebf&is=65131d3f&hm=8566dd12d54b63b7bfd9537225582adae5be7446d662a915d79545f732d64cc5&'>
    </imagetarget>
    <imagetarget id='RuaNuiNganTuoi-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290286545289287/RuaNuiNganTuoi-LV1.jpg?ex=65146ebf&is=65131d3f&hm=334831bf2f9224c3c9b2c03f1d122ea287596dbdc2c3cee1ed4c3cd7f1d59cbc&'>
    </imagetarget>
    <imagetarget id='RuaNuiNganTuoi-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290286838886541/RuaNuiNganTuoi-LV2.jpg?ex=65146ebf&is=65131d3f&hm=01fba189f98d8c537a8f4f12660af0844af73d95e6acd5af7a4428da97b82c0e&'>
    </imagetarget>
    <imagetarget id='RuaNuiNganTuoi-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290287191195740/RuaNuiNganTuoi-LV3.jpg?ex=65146ebf&is=65131d3f&hm=2a3159a5b1b6f244532b8de9ed7e3054d66b802531d48e5339f46a7bdf628f6f&'>
    </imagetarget>
    <imagetarget id='SanHoDo-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290287522562189/SanHoDo-LV1.jpg?ex=65146ebf&is=65131d3f&hm=d5b94e79a5c21c5b9b7f2b9cc20784e73c775d32045b8c9126eabfabd3ee54a9&'>
    </imagetarget>
    <imagetarget id='SanHoDo-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290287824547961/SanHoDo-LV2.jpg?ex=65146ebf&is=65131d3f&hm=f8aa6fb682deb76cdbf1ba6cb1994b76127ddc5ad7106394e1e68fa095b5a3ec&'>
    </imagetarget>
    <imagetarget id='SanHoDo-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290288122331227/SanHoDo-LV3.jpg?ex=65146ebf&is=65131d3f&hm=d712eaafd272202f7cd77144fe36c11d7390ce686c1a58ae3da4d90e482b654d&'>
    </imagetarget>
    <imagetarget id='SuuSuu-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290301619613747/SuuSuu-LV1.jpg?ex=65146ec2&is=65131d42&hm=d3c73829972200a3422a72af73f98cdfb3d912745cfde5ac8dd4a232b21904ea&'>
    </imagetarget>
    <imagetarget id='SuuSuu-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290301942562817/SuuSuu-LV2.jpg?ex=65146ec2&is=65131d42&hm=e3b2d4ba68ad9c09d8d454081e783a776c1fd82479f91deec00d838e5cf17d88&'>
    </imagetarget>
    <imagetarget id='SuuSuu-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290302257139812/SuuSuu-LV3.jpg?ex=65146ec2&is=65131d42&hm=b9dcf461b1bc77bf272be927f67d78dd9fb0d18827f02359a561d37370ef39eb&'>
    </imagetarget>
    <imagetarget id='TeGiacCauKinh-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290302575915069/TeGiacCauKinh-LV1.jpg?ex=65146ec2&is=65131d42&hm=e6bbb177c412c4a3c1716e7a20de559132a954b2c8868011d13aeb79acfaa3c5&'>
    </imagetarget>
    <imagetarget id='TeGiacCauKinh-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290303746113661/TeGiacCauKinh-LV2.jpg?ex=65146ec3&is=65131d43&hm=02be5e5f91ae81d33bc22d620a868713c1571019b55e5d78a678d651ea8f890f&'>
    </imagetarget>
    <imagetarget id='TeGiacCauKinh-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290304438177845/TeGiacCauKinh-LV3.jpg?ex=65146ec3&is=65131d43&hm=27d4498bd167739e2421efc900318753113f89e8c0a23f7224db46ae0d4b73b7&'>
    </imagetarget>
    <imagetarget id='ThachCaSau-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290304870199398/ThachCaSau-LV1.jpg?ex=65146ec3&is=65131d43&hm=6ad906185a9897482a10f9c75a5183a5495cdbc83e8d5ace3e68001e1a67b126&'>
    </imagetarget>
    <imagetarget id='ThachCaSau-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290305193148537/ThachCaSau-LV2.jpg?ex=65146ec3&is=65131d43&hm=662b0e98aae6d235127da2fd7ff71082e2882f020de70b1ab5ac9efa1fa74e38&'>
    </imagetarget>
    <imagetarget id='ThachCaSau-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290305469976658/ThachCaSau-LV3.jpg?ex=65146ec3&is=65131d43&hm=b07f25a5fd82bfcf0941aa64fda3e7782582b84766f880121bbd1dcd34d19e3d&'>
    </imagetarget>
    <imagetarget id='VetBocHoa-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290317360836638/VetBocHoa-LV1.jpg?ex=65146ec6&is=65131d46&hm=202b6c5b166478f6922435f96fca64aefe54c5f86c5dfefdeac93aee19085c7b&'>
    </imagetarget>
    <imagetarget id='VetBocHoa-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290317759283310/VetBocHoa-LV2.jpg?ex=65146ec6&is=65131d46&hm=6a6885c2f606db3af62ac0857f35c3a44c0cff08978f3860a0f7053eca9e53f7&'>
    </imagetarget>
    <imagetarget id='VetBocHoa-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290318279389184/VetBocHoa-LV3.jpg?ex=65146ec6&is=65131d46&hm=52f9db55d1b6b3a19edc0ed5d5a63bbe992d8763d775f5c073181d6e556ed38c&'>
    </imagetarget>
    <imagetarget id='YetTu-LV1'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290318635913298/YetTu-LV1.jpg?ex=65146ec6&is=65131d46&hm=a5d22173b8244b5c152531aaf31005da122c01de38fdeb0b08f29f1a1a99b97a&'>
    </imagetarget>
    <imagetarget id='YetTu-LV2'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290318942077178/YetTu-LV2.jpg?ex=65146ec6&is=65131d46&hm=0145a6fa40bc297a02b6f37dd8b75b1ce3f8c6e2c8e1b2766c8a84410e96caf8&'>
    </imagetarget>
    <imagetarget id='YetTu-LV3'
        src='https://cdn.discordapp.com/attachments/1156289847238066177/1156290319336353852/YetTu-LV3.jpg?ex=65146ec6&is=65131d46&hm=85f364c0a3b527d12f72c60a4fed10e3d718f1e7ccb1bffdbc155881ebdf474a&'>
    </imagetarget>

    <video id="webcam-video" muted autoplay playsinline style="width:1px;position:absolute"></video>
    <div id="startARDiv" class="ctaDiv">
        <select id="chooseCamSel" style="display: none;" onchange="SelectCam()"></select>
        <p style="text-align: center; width:60vw;">This augmented reality experience requires access to your device's
            camera</p>
        <button id="startARButton" onclick="StartAR()" style="display:none">ALLOW ACCESS</button>
    </div>
    <div id="screenshotDiv" style="display: none;" class="ctaDiv">
        <div
            style="position:relative; background-color:white; padding:10px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.25);">
            <img id="screenshotImg" src="" alt="screenshot" style="width:80vw; height:80vh">
            <button onclick="document.getElementById('screenshotDiv').style.display = 'none';"
                style="position:absolute; transform:translateY(-100%); right:0; top:0">Close</button>
        </div>
    </div>
    <!-- ENABLE THIS FOR WECHAT -->
    <!-- <div id="startWebcamManuallyDiv" style="display: none" class="ctaDiv">
        <button onclick="StartCameraManually()" style="width:180px; height:40px; border:1px solid gray; border-radius:8px">START WEBCAM</button>
    </div> -->
    <div id="errorDiv" class="ctaDiv" style="display: none; background:#aaa">
        <p id="errorText" style="text-align: center; width:60vw; color:white"></p>
    </div>
    <div id="unity-container" class="unity-mobile">
        <canvas id="unity-canvas" style="width: 100%; height: 100%; background: #0000; z-index: -99"></canvas>
        <div id="unity-loading-bar">
            <div id="unity-logo"></div>
            <div id="unity-progress-bar-empty">
                <div id="unity-progress-bar-full"></div>
            </div>
        </div>
        <canvas id="video-canvas"></canvas>
    </div>
    <script src="itracker.js" type="text/javascript"></script>
    <script>
        var unityCanvas = document.querySelector("#unity-canvas");
        var videoCanvas = document.querySelector("#video-canvas");
        window.iTracker = new ImageTracker(unityCanvas, videoCanvas);
        window.iTracker.initialize()
            .then(async () => {
                console.log("ImageTracker initialized!");
                await LoadWebcams();
                document.getElementById("startARButton").style.display = "block";
            })
            .catch(error => {
                console.error("Failed to initialize ImageTracker. Are you missing opencv.js?");
                ShowError("Failed to initialize the experience.");
            });;

    </script>
    <script src="Build/Builds.loader.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore-compat.js"></script>
    <script>
        var container = document.querySelector("#unity-container");
        var canvas = document.querySelector("#unity-canvas");
        var loadingBar = document.querySelector("#unity-loading-bar");
        var progressBarFull = document.querySelector("#unity-progress-bar-full");

        const firebaseConfig = {
            apiKey: "AIzaSyAnM9XARRvqmNmaUDMZRxQ6xW-4QCnNfmo",
            authDomain: "pokemon-cbb8e.firebaseapp.com",
            projectId: "pokemon-cbb8e",
            storageBucket: "pokemon-cbb8e.appspot.com",
            messagingSenderId: "51712142389",
            appId: "1:51712142389:web:b38c0c5495110212b0157c",
            measurementId: "G-KBSZP9WN94"
        };
        const app = firebase.initializeApp(firebaseConfig);
        const rest = app.firestore();

        function StartAR() {
            canvas.style.width = window.innerWidth + "px";
            canvas.style.height = window.innerHeight + "px";

            document.getElementById("startARDiv").style.display = "none";
            createUnityInstance(document.querySelector("#unity-canvas"), {
                dataUrl: "Build/Builds.data",
                frameworkUrl: "Build/Builds.framework.js",
                codeUrl: "Build/Builds.wasm",
                streamingAssetsUrl: "StreamingAssets",
                companyName: "XRGame",
                productName: "pokemon_ar",
                productVersion: "0.1",
                //webglContextAttributes: { "preserveDrawingBuffer": true },
                // matchWebGLToCanvasSize: false, // Uncomment this to separately control WebGL canvas render size and DOM element size.
                // devicePixelRatio: 1, // Uncomment this to override low DPI rendering on high DPI displays.
            },
                (progress) => {
                    progressBarFull.style.width = 100 * progress + "%";
                }
            ).then((unityInstance) => {
                window.unityInstance = unityInstance;
                StartWebcam();
                //ENABLE THIS FOR WECHAT
                //[FIX]: some browsers (such as Wechat) does not allow webcam autoplay so we need to start the webcam manually via new button press
                // window.waitForVideo = () => {
                //     setTimeout(() => {
                //         if (!window.iTracker.VIDEO) {
                //             window.waitForVideo();
                //         }
                //         else if (window.iTracker.VIDEO.currentTime <= 0) {
                //             document.getElementById("startWebcamManuallyDiv").style.display = "flex";
                //         }
                //     }, 2500)
                // };
                // window.waitForVideo();
                loadingBar.style.display = "none";
            });
            loadingBar.style.display = "block";
        }
        window.WEBCAM_SETTINGS = {
            video: {
                facingMode: "environment",
            },
            audio: false
        };
        async function StartWebcam() {
            try {
                var stream = await navigator.mediaDevices.getUserMedia(window.WEBCAM_SETTINGS);
                const video = document.querySelector("#webcam-video");
                video.srcObject = stream;
                iTracker.startWebcam(video);
                try {
                    await iTracker.startWebcam(video);
                    console.log("Webcam started successfully");
                }
                catch (err) {
                    console.error("Webcam failed to start - ", err);
                    ShowError("Failed to start the experience. Webcam failed to start");
                }
            }
            catch (err) {
                console.log("getUserMedia Error", err);
                ShowError("Failed to start the experience. Camera permission was denied");
            }

        }
        async function LoadWebcams() {
            let backCams = [];
            let devices = await navigator.mediaDevices.enumerateDevices();
            devices.forEach(mediaDevice => {
                if (mediaDevice.kind === 'videoinput') {  //&& !mediaDevice.label.includes('facing front')) {
                    backCams.push(mediaDevice);
                }
            });
            var select = document.getElementById("chooseCamSel");
            select.style.display = "block";
            var count = 0;
            //reverse array because some Android phones can't distinguish front and back cams at first load
            //and when this happens, most of the time, front cam goes first and back cam goes last
            backCams = backCams.reverse();
            backCams.forEach(mediaDevice => {
                const option = document.createElement('option');
                option.value = mediaDevice.deviceId;
                let label = `Camera ${count}`;
                if (mediaDevice.label) {
                    label = mediaDevice.label
                }
                const textNode = document.createTextNode(label);
                option.appendChild(textNode);
                select.appendChild(option);
                count++;
            });
            iTracker.WEBCAM_NAME = select.options[select.selectedIndex].innerHTML;
        }
        function SelectCam() {
            var select = document.getElementById("chooseCamSel");
            window.deviceId = select.value;
            window.WEBCAM_SETTINGS.video['deviceId'] = deviceId;
            //console.log(window.WEBCAM_SETTINGS);
            iTracker.WEBCAM_NAME = select.options[select.selectedIndex].innerHTML;
        }
        function ShowError(error) {
            document.getElementById("errorDiv").style.display = "flex";
            document.getElementById("errorText").innerHTML = error;
        }
        function ShowScreenshot(dataUrl) {
            document.getElementById("screenshotDiv").style.display = "flex";
            document.getElementById("screenshotImg").src = dataUrl;
            document.getElementById("screenshotImg").style.width = "80vw";
            document.getElementById("screenshotImg").style.height = 80 / window.innerWidth * window.innerHeight + "vw";
        }

        //ENABLE THIS FOR WECHAT
        // function StartCameraManually() {
        //     document.getElementById("startWebcamManuallyDiv").style.display = "none";
        //     iTracker.VIDEO.play()
        // }
    </script>
</body>

</html>